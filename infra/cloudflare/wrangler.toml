name = "claim-storage"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[env.development]
name = "claim-storage-dev"

[env.production]
name = "claim-storage"

[[r2_buckets]]
binding = "MATCHES_BUCKET"
bucket_name = "claim-matches"

[[durable_objects.bindings]]
name = "MATCH_COORDINATOR"
class_name = "MatchCoordinatorDO"
script_name = "claim-storage"

[migrations]
[[migrations]]
tag = "v1"
new_classes = ["MatchCoordinatorDO"]

[vars]
ENVIRONMENT = "development"
# Per critique Issue #12: CORS configuration - MUST be specific origin in production
# Development allows * for local testing, production MUST use specific origin
CORS_ORIGIN = "*"  # TODO: Set to specific origin in production (e.g., "https://claim.game")

[env.production.vars]
ENVIRONMENT = "production"
# Per critique Issue #12: Reject * in production for security
CORS_ORIGIN = "https://claim.game"  # MUST be specific origin, not *

